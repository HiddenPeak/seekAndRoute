# 应用开发商版本-系统架构说明文档

本文档概述了系统的三部分架构及其关键组件，供应用开发商参考。系统由以下三个单元组成：计算单元、应用单元和硬件控制单元。以下是各单元的详细说明，包括IP地址、端口分配、存储路径及功能描述。

1.  计算单元

- IP地址：10.10.99.98
- 功能：负责运行推理框架和模型，提供计算服务。
- 组件：
  - 推理框架：
    - vLLM推理框架：大语言模型（LLM）服务，端口：58000
    - TEI Embedding模型：端口：58080
    - TEI Reranker模型：端口：58081
  - 端口范围：计算单元的其他接口定义在58000~58999之间。
- 自动拉起脚本：
  - 路径：~/cfe/autorun.sh
  - 说明：非加密自动拉起脚本，用户可编辑，用于指定默认自动启动的模型脚本。
- 模型存储路径：
  - 手动配置模型存储：~/cfe/model
    - 大语言模型：~/cfe/model/llm
    - Embedding模型：~/cfe/model/embedding
    - Reranker模型：~/cfe/model/reranker
  - 完全自动拉起模型存储（无需脚本）：~/cfe/autoModel
    - 大语言模型：~/cfe/autoModel/llm
    - Embedding模型：~/cfe/autoModel/embedding
    - Reranker模型：~/cfe/autoModel/reranker
- 应用单元

- IP地址：10.10.99.99
- 功能：运行用户应用和系统平台，提供应用服务。
- 组件：
  - Nginx：用户应用服务，端口：80
  - 系统平台端口：
    - Dify：端口59080
    - Altai（本地部署版本）：端口59299
  - 端口范围：应用单元端口定义在59000~59299之间。
- 应用存储路径：
  - 导入非加密应用的存储位置（位于计算单元链接的CFE存储卡）：
    - 路径：~/cfe/app
  - 运行应用的存储位置（位于应用单元的NVMe硬盘）：
    - 路径：~/app
- 硬件控制单元

- IP地址：10.10.99.97
- 功能：提供硬件监控及相关配置。
- 组件：
  - 硬件监控服务：端口80，用于硬件状态监测。
- 存储路径（位于存储卡）：
  - 硬件监控前端：/sdcard/web
    - 说明：用户可自行修改硬件监控的前端界面。
  - 矩阵显示Logo配置文件：/sdcard/matrix.json
    - 说明：用于配置矩阵显示的Logo。

## 注意事项

1. 端口管理：各单元的端口范围已明确划分，开发时请确保端口不冲突。
2. 存储路径：请严格按照指定路径存储模型和应用，确保系统自动识别和运行。
3. 用户可编辑内容：
   - 计算单元的~/cfe/autorun.sh脚本可由用户自定义。
   - 硬件控制单元的/sdcard/web前端界面支持用户修改。
4. 非加密内容：所有导入的应用和脚本均为非加密格式，请确保安全性。

如需进一步技术支持或详细配置指南，请联系系统管理员。
